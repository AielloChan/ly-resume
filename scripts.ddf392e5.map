{"version":3,"sources":["scripts/map.js","scripts/lineSpirit.js","scripts/index.js"],"names":["getLocation","navigator","geolocation","getCurrentPosition","onSuccess","onError","log","position","longitude","coords","latitude","map","BMap","Map","point","Point","centerAndZoom","icon","Icon","Size","marker","Marker","addOverlay","addEventListener","error","querySelector","remove","window","onload","init","LineSpirit","canvas","ctx","cw","cx","ch","cy","linesNum","requestId","linesRy","line","flag","a","b","y","x","randomIntFromInterval","va","vb","draw","strokeStyle","beginPath","moveTo","lineTo","stroke","update","edges","requestAnimationFrame","clearRect","i","length","l","j","push","cancelAnimationFrame","width","document","body","scrollWidth","height","scrollHeight","intersect2lines","l1","l2","p1","p2","p3","p4","denominator","ua","ub","markPoint","p","arc","Math","PI","fill","mn","mx","random","options","config","el","background","getContext","fillStyle","loadDom","pageDom","setTimeout","style","opacity","display"],"mappings":"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","file":"scripts.ddf392e5.map","sourceRoot":"..","sourcesContent":["// 调用HTML5 GeoLocation API获取地理位置\nfunction getLocation() {\n  var options = {\n    enableHighAccuracy: true,\n    maximumAge: 1000\n  };\n\n  if (navigator.geolocation) {\n    //浏览器支持geolocation\n    navigator.geolocation.getCurrentPosition(onSuccess, onError, options);\n  } else {\n    //浏览器不支持geolocation\n    console.log(\"浏览器不支持GeoLocation!\");\n  }\n}\n\n// 获取成功\nfunction onSuccess(position) {\n  // 经度\n  var longitude = position.coords.longitude;\n\n  // 纬度\n  var latitude = position.coords.latitude;\n\n  // 使用百度地图API创建地图实例\n  var map = new BMap.Map(\"map\");\n\n  // 创建一个坐标\n  var point = new BMap.Point(longitude, latitude);\n\n  // 地图初始化，设置中心点坐标和地图级别\n  map.centerAndZoom(point, 16);\n\n  // 设置标注的图标,可自己定义图标\n  var icon = new BMap.Icon(\n    \"http://api.map.baidu.com/img/markers.png\",\n    new BMap.Size(23, 25),\n    {\n      offset: new BMap.Size(10, 25), // 定位图标尺寸\n      imageOffset: new BMap.Size(0, 0 - 11 * 25) // 设置图片偏移\n    }\n  );\n\n  // 设置标注的经纬度\n  var marker = new BMap.Marker(new BMap.Point(longitude, latitude), {\n    icon: icon\n  });\n\n  // 把标注添加到地图上\n  map.addOverlay(marker);\n\n  // 设置点击事件\n  marker.addEventListener(\"click\", function() {\n    alert(\"经度:\" + longitude + \", 纬度:\" + latitude);\n  });\n}\n\n// 获取失败\nfunction onError(error) {\n  document.querySelector(\"#map\").remove();\n}\n\nwindow.onload = getLocation;\n","let canvas, ctx, cw, cx, ch, cy, linesNum, requestId, linesRy;\r\n\r\nfunction line(flag) {\r\n  this.flag = flag;\r\n  this.a = {};\r\n  this.b = {};\r\n  if (flag == \"v\") {\r\n    this.a.y = 0;\r\n    this.b.y = ch;\r\n    this.a.x = randomIntFromInterval(0, ch);\r\n    this.b.x = randomIntFromInterval(0, ch);\r\n  } else if (flag == \"h\") {\r\n    this.a.x = 0;\r\n    this.b.x = cw;\r\n    this.a.y = randomIntFromInterval(0, cw);\r\n    this.b.y = randomIntFromInterval(0, cw);\r\n  }\r\n  this.va = randomIntFromInterval(25, 100) / 100;\r\n  this.vb = randomIntFromInterval(25, 100) / 100;\r\n\r\n  this.draw = function() {\r\n    ctx.strokeStyle = \"#ccc\";\r\n    ctx.beginPath();\r\n    ctx.moveTo(this.a.x, this.a.y);\r\n    ctx.lineTo(this.b.x, this.b.y);\r\n    ctx.stroke();\r\n  };\r\n\r\n  this.update = function() {\r\n    if (this.flag == \"v\") {\r\n      this.a.x += this.va;\r\n      this.b.x += this.vb;\r\n    } else if (flag == \"h\") {\r\n      this.a.y += this.va;\r\n      this.b.y += this.vb;\r\n    }\r\n\r\n    this.edges();\r\n  };\r\n\r\n  this.edges = function() {\r\n    if (this.flag == \"v\") {\r\n      if (this.a.x < 0 || this.a.x > cw) {\r\n        this.va *= -1;\r\n      }\r\n      if (this.b.x < 0 || this.b.x > cw) {\r\n        this.vb *= -1;\r\n      }\r\n    } else if (flag == \"h\") {\r\n      if (this.a.y < 0 || this.a.y > ch) {\r\n        this.va *= -1;\r\n      }\r\n      if (this.b.y < 0 || this.b.y > ch) {\r\n        this.vb *= -1;\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nfunction draw() {\r\n  requestId = window.requestAnimationFrame(draw);\r\n  ctx.clearRect(0, 0, cw, ch);\r\n\r\n  for (var i = 0; i < linesRy.length; i++) {\r\n    var l = linesRy[i];\r\n    l.draw();\r\n    l.update();\r\n  }\r\n  for (var i = 0; i < linesRy.length; i++) {\r\n    var l = linesRy[i];\r\n    for (var j = i + 1; j < linesRy.length; j++) {\r\n      var l1 = linesRy[j];\r\n      intersect2lines(l, l1);\r\n    }\r\n  }\r\n}\r\n\r\nexport function init() {\r\n  linesRy.length = 0;\r\n  for (var i = 0; i < linesNum; i++) {\r\n    var flag = i % 2 == 0 ? \"h\" : \"v\";\r\n    var l = new line(flag);\r\n    linesRy.push(l);\r\n  }\r\n\r\n  if (requestId) {\r\n    window.cancelAnimationFrame(requestId);\r\n    requestId = null;\r\n  }\r\n\r\n  (cw = canvas.width = document.body.scrollWidth), (cx = cw / 2);\r\n  (ch = canvas.height = document.body.scrollHeight), (cy = ch / 2);\r\n\r\n  draw();\r\n}\r\n\r\nfunction intersect2lines(l1, l2) {\r\n  var p1 = l1.a,\r\n    p2 = l1.b,\r\n    p3 = l2.a,\r\n    p4 = l2.b;\r\n  var denominator =\r\n    (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\r\n  var ua =\r\n    ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) /\r\n    denominator;\r\n  var ub =\r\n    ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) /\r\n    denominator;\r\n  var x = p1.x + ua * (p2.x - p1.x);\r\n  var y = p1.y + ua * (p2.y - p1.y);\r\n  if (ua > 0 && ub > 0) {\r\n    markPoint({\r\n      x: x,\r\n      y: y\r\n    });\r\n  }\r\n}\r\n\r\nfunction markPoint(p) {\r\n  ctx.beginPath();\r\n  ctx.arc(p.x, p.y, 2, 0, 2 * Math.PI);\r\n  ctx.fill();\r\n}\r\n\r\nfunction randomIntFromInterval(mn, mx) {\r\n  return ~~(Math.random() * (mx - mn + 1) + mn);\r\n}\r\n\r\nexport function LineSpirit(options) {\r\n  options = options || {};\r\n  const config = {\r\n    el: options.el || \"#canvas\",\r\n    background: options.background || \"#000\",\r\n    linesNum: options.linesNum || 16\r\n  };\r\n\r\n  canvas = document.querySelector(config.el);\r\n  ctx = canvas.getContext(\"2d\");\r\n  cw = canvas.width = document.body.scrollWidth;\r\n  cx = cw / 2;\r\n  ch = canvas.height = document.body.scrollHeight;\r\n  cy = ch / 2;\r\n\r\n  ctx.fillStyle = config.background;\r\n  linesNum = config.linesNum;\r\n  linesRy = [];\r\n  requestId = null;\r\n\r\n  for (var i = 0; i < linesNum; i++) {\r\n    var flag = i % 2 == 0 ? \"h\" : \"v\";\r\n    var l = new line(flag);\r\n    linesRy.push(l);\r\n  }\r\n\r\n  setTimeout(function() {\r\n    init();\r\n\r\n    addEventListener(\"resize\", init, false);\r\n  }, 15);\r\n}\r\n","import \"../styles/index.scss\";\nimport \"./map.js\";\nimport { LineSpirit, init } from \"./lineSpirit.js\";\n\nLineSpirit({\n  el: \"#lineSpirit\",\n  linesNum: 16\n});\n\nconst loadDom = document.querySelector(\".loader\");\nconst pageDom = document.querySelector(\".page\");\n\nsetTimeout(() => {\n  loadDom.style.opacity = \"0\";\n  pageDom.style.display = \"flex\";\n  init();\n}, 500);\n"]}